<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>New Patient Form</title>
    <link rel="stylesheet" href="css/patientForm.css" />

    <script>
      // Function to get checked values from checkbox groups with details
      function getCheckedValuesWithDetails(
        name,
        past = false,
        isInjury = false
      ) {
        return Array.from(
          document.querySelectorAll(`input[name="${name}"]:checked`)
        ).map((checkbox) => {
          const symptom = checkbox.value;
          if (isInjury) {
            if (symptom === "other") {
              // Handle "other" option for injuries
              const notes =
                document.querySelector(`textarea[name="other_injuries_notes"]`)
                  ?.value || "N/A"; // Default to "N/A" if notes are empty
              return `Other (${notes})`;
            } else {
              // For regular past injuries, retrieve notes from the corresponding textarea
              const notes =
                document.querySelector(`textarea[name="${symptom}_notes"]`)
                  ?.value || "N/A";
              return `${symptom} (${notes})`;
            }
          } else if (symptom === "other") {
            // Handle "other" option for current or past symptoms
            const notes = document.querySelector(
              `textarea[name="${past ? "past" : "current"}_other_notes"]`
            )?.value;
            return `Other (${notes})`;
          } else {
            const prefix = past ? "past_" : "";
            const frequency =
              document.querySelector(
                `select[name="${prefix}${symptom}_frequency"]`
              )?.value || "";
            const location =
              document.querySelector(
                `input[name="${prefix}${symptom}_location"]`
              )?.value || "";
            const intensity =
              document.querySelector(
                `select[name="${prefix}${symptom}_intensity"]`
              )?.value || "";
            let details = [];

            if (frequency) details.push(`Frequency: ${frequency}`);
            if (location) details.push(`Location: ${location}`);
            if (intensity) details.push(`Intensity: ${intensity}`);

            return details.length > 0
              ? `${symptom} (${details.join(", ")})`
              : symptom;
          }
        });
      }

      async function postClient() {
        const currentSymptoms =
          getCheckedValuesWithDetails("current_symptoms").join(", \n");
        const pastSymptoms = getCheckedValuesWithDetails(
          "past_symptoms",
          true
        ).join(", \n");
        const pastInjuries = getCheckedValuesWithDetails(
          "past_injuries",
          true,
          true
        ).join(", \n");
        const pastSurgeries = document
          .getElementById("past_surgeries")
          .value.trim();

        const data = {
          first_name: document.getElementById("first_name").value,
          last_name: document.getElementById("last_name").value,
          phone: document.getElementById("phone").value,
          email: document.getElementById("email").value,
          dob: document.getElementById("dob").value,
          street: document.getElementById("street_address").value,
          city: document.getElementById("city").value,
          state: document.getElementById("state").value,
          zip: document.getElementById("zip").value,
          emergency_contact: document.getElementById("emergency_contact_name")
            .value,
          emergency_contact_phone: document.getElementById(
            "emergency_contact_phone"
          ).value,
          heard_about_us: document.getElementById("referral").value,
          current_symptoms: currentSymptoms,
          past_symptoms: pastSymptoms,
          past_injuries: pastInjuries,
          past_surgeries: pastSurgeries,
          form_data: `Current Symptoms: ${currentSymptoms}\n\nPast Symptoms: ${pastSymptoms}\n\nPast Injuries: ${pastInjuries}\n\nPast Surgeries: ${pastSurgeries}`,
        };

        console.log("data:", JSON.stringify(data, null, 2));
        // Replace with your API Gateway URL
        const apiUrl =
          "https://rojwnqs7nuz5qzoydq6f3qk3te0ucghe.lambda-url.us-east-2.on.aws/";

        try {
          const response = await fetch(apiUrl, {
            method: "POST",
            body: JSON.stringify(data),
          });

          const result = await response.json();
          console.log("Success:", result);
          alert("Form submitted!");
          window.location.href = "index.html";
        } catch (error) {
          console.error("Error:", error);
          alert(
            "There was an error submitting your form. Please try again later or double check the fields in your submission."
          );
        }
      }
    </script>

    <script>
      function toggleOtherReferral() {
        var referral = document.getElementById("referral");
        var otherReferral = document.getElementById("otherReferral");

        if (referral.value === "other") {
          otherReferral.classList.remove("hidden");
        } else {
          otherReferral.classList.add("hidden");
        }
      }

      function toggleSymptomDetails(checkbox, detailsId) {
        var details = document.getElementById(detailsId);
        if (checkbox.checked) {
          details.classList.remove("hidden");
        } else {
          details.classList.add("hidden");
        }
      }
    </script>
  </head>
  <body>
    <div class="container">
      <h1>New Patient Form</h1>
      <form action="/submit" method="post">
        <div class="form-field">
          <label for="first_name">First Name:</label>
          <input
            type="text"
            id="first_name"
            name="first_name"
            maxlength="100"
            required
          />
        </div>

        <div class="form-field">
          <label for="last_name">Last Name:</label>
          <input
            type="text"
            id="last_name"
            name="last_name"
            maxlength="100"
            required
          />
        </div>

        <div class="form-field">
          <label for="phone">Mobile Phone:</label>
          <input type="tel" id="phone" name="phone" maxlength="20" required />
        </div>

        <div class="form-field">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" maxlength="100" />
        </div>

        <div class="form-field">
          <label for="dob">Date of Birth:</label>
          <input type="date" id="dob" name="dob" />
        </div>

        <div class="form-field">
          <label for="street_address">Street Address:</label>
          <input
            type="text"
            id="street_address"
            name="street_address"
            maxlength="100"
            required
          />
        </div>

        <div class="form-field">
          <label for="city">City:</label>
          <input type="text" id="city" name="city" maxlength="100" required />
        </div>

        <div class="form-field">
          <label for="state">State:</label>
          <select id="state" name="state" required>
            <option value="">Select a state</option>
            <option value="AL">AL - Alabama</option>
            <option value="AK">AK - Alaska</option>
            <option value="AZ">AZ - Arizona</option>
            <option value="AR">AR - Arkansas</option>
            <option value="CA">CA - California</option>
            <option value="CO">CO - Colorado</option>
            <option value="CT">CT - Connecticut</option>
            <option value="DE">DE - Delaware</option>
            <option value="FL">FL - Florida</option>
            <option value="GA">GA - Georgia</option>
            <option value="HI">HI - Hawaii</option>
            <option value="ID">ID - Idaho</option>
            <option value="IL">IL - Illinois</option>
            <option value="IN">IN - Indiana</option>
            <option value="IA">IA - Iowa</option>
            <option value="KS">KS - Kansas</option>
            <option value="KY">KY - Kentucky</option>
            <option value="LA">LA - Louisiana</option>
            <option value="ME">ME - Maine</option>
            <option value="MD">MD - Maryland</option>
            <option value="MA">MA - Massachusetts</option>
            <option value="MI">MI - Michigan</option>
            <option value="MN">MN - Minnesota</option>
            <option value="MS">MS - Mississippi</option>
            <option value="MO">MO - Missouri</option>
            <option value="MT">MT - Montana</option>
            <option value="NE">NE - Nebraska</option>
            <option value="NV">NV - Nevada</option>
            <option value="NH">NH - New Hampshire</option>
            <option value="NJ">NJ - New Jersey</option>
            <option value="NM">NM - New Mexico</option>
            <option value="NY">NY - New York</option>
            <option value="NC">NC - North Carolina</option>
            <option value="ND">ND - North Dakota</option>
            <option value="OH">OH - Ohio</option>
            <option value="OK">OK - Oklahoma</option>
            <option value="OR">OR - Oregon</option>
            <option value="PA">PA - Pennsylvania</option>
            <option value="RI">RI - Rhode Island</option>
            <option value="SC">SC - South Carolina</option>
            <option value="SD">SD - South Dakota</option>
            <option value="TN">TN - Tennessee</option>
            <option value="TX">TX - Texas</option>
            <option value="UT">UT - Utah</option>
            <option value="VT">VT - Vermont</option>
            <option value="VA">VA - Virginia</option>
            <option value="WA">WA - Washington</option>
            <option value="WV">WV - West Virginia</option>
            <option value="WI">WI - Wisconsin</option>
            <option value="WY">WY - Wyoming</option>
          </select>
        </div>

        <div class="form-field">
          <label for="zip">Zip Code:</label>
          <input
            type="text"
            id="zip"
            name="zip"
            maxlength="10"
            pattern="^\d{1,5}(-\d{1,4})?$"
            required
            oninput="this.value = this.value.replace(/[^0-9-]/g, '')"
          />
        </div>

        <div class="form-field">
          <label for="emergency_contact_name">Emergency Contact Name:</label>
          <input
            type="text"
            id="emergency_contact_name"
            name="emergency_contact_name"
            maxlength="100"
          />
        </div>

        <div class="form-field">
          <label for="emergency_contact_phone">Emergency Contact Phone:</label>
          <input
            type="tel"
            id="emergency_contact_phone"
            name="emergency_contact_phone"
            maxlength="20"
          />
        </div>

        <div class="form-field">
          <label for="referral">How did you hear about us:</label>
          <input
            id="referral"
            name="referral"
            maxlength="100"
            
          >
            
          </input>
          <input
            type="text"
            id="otherReferral"
            name="other_referral"
            class="hidden"
            placeholder="Please specify"
          />
        </div>

        <div class="section-divider"></div>

        <div class="form-field">
          <label for="current_symptoms"
            >Current Symptoms/Medical Conditions:</label
          >
          <div class="checkbox-group">
            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="headache"
                onclick="toggleSymptomDetails(this, 'headacheDetails')"
              />
              Headache
            </label>
            <div id="headacheDetails" class="hidden">
              <label>Frequency:</label>
              <select name="headache_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="headache_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="headache_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="back_pain"
                onclick="toggleSymptomDetails(this, 'backPainDetails')"
              />
              Back Pain
            </label>
            <div id="backPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="back_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="back_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="back_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="neck_pain"
                onclick="toggleSymptomDetails(this, 'neckPainDetails')"
              />
              Neck Pain
            </label>
            <div id="neckPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="neck_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="neck_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="neck_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="shoulder_pain"
                onclick="toggleSymptomDetails(this, 'shoulderPainDetails')"
              />
              Shoulder Pain
            </label>
            <div id="shoulderPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="shoulder_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="shoulder_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="shoulder_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="jaw_pain"
                onclick="toggleSymptomDetails(this, 'jawPainDetails')"
              />
              Jaw Pain
            </label>
            <div id="jawPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="jaw_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="jaw_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="jaw_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="muscle_stiffness"
                onclick="toggleSymptomDetails(this, 'muscleStiffnessDetails')"
              />
              Muscle Stiffness
            </label>
            <div id="muscleStiffnessDetails" class="hidden">
              <label>Frequency:</label>
              <select name="muscle_stiffness_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="muscle_stiffness_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="muscle_stiffness_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="joint_pain"
                onclick="toggleSymptomDetails(this, 'jointPainDetails')"
              />
              Joint Pain
            </label>
            <div id="jointPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="joint_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="joint_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="joint_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="fatigue"
                onclick="toggleSymptomDetails(this, 'fatigueDetails')"
              />
              Fatigue
            </label>
            <div id="fatigueDetails" class="hidden">
              <label>Frequency:</label>
              <select name="fatigue_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Intensity:</label>
              <select name="fatigue_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="stress"
                onclick="toggleSymptomDetails(this, 'stressDetails')"
              />
              Stress
            </label>
            <div id="stressDetails" class="hidden">
              <label>Frequency:</label>
              <select name="stress_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Intensity:</label>
              <select name="stress_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="current_symptoms"
                value="other"
                onclick="toggleSymptomDetails(this, 'otherSymptomsDetails')"
              />
              Other
            </label>
            <textarea
              id="otherSymptomsDetails"
              name="current_other_notes"
              class="hidden other-notes"
              placeholder="Please specify other medical conditions"
              style="margin-top: 10px"
            ></textarea>
          </div>
        </div>

        <div class="section-divider"></div>

        <div class="form-field">
          <label for="past_symptoms">Past Symptoms/Medical Conditions:</label>
          <div class="checkbox-group">
            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="headache"
                onclick="toggleSymptomDetails(this, 'pastHeadacheDetails')"
              />
              Headache
            </label>
            <div id="pastHeadacheDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_headache_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_headache_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_headache_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="back_pain"
                onclick="toggleSymptomDetails(this, 'pastBackPainDetails')"
              />
              Back Pain
            </label>
            <div id="pastBackPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_back_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_back_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_back_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="neck_pain"
                onclick="toggleSymptomDetails(this, 'pastNeckPainDetails')"
              />
              Neck Pain
            </label>
            <div id="pastNeckPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_neck_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_neck_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_neck_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="shoulder_pain"
                onclick="toggleSymptomDetails(this, 'pastShoulderPainDetails')"
              />
              Shoulder Pain
            </label>
            <div id="pastShoulderPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_shoulder_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_shoulder_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_shoulder_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="jaw_pain"
                onclick="toggleSymptomDetails(this, 'pastJawPainDetails')"
              />
              Jaw Pain
            </label>
            <div id="pastJawPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_jaw_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_jaw_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_jaw_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="muscle_stiffness"
                onclick="toggleSymptomDetails(this, 'pastMuscleStiffnessDetails')"
              />
              Muscle Stiffness
            </label>
            <div id="pastMuscleStiffnessDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_muscle_stiffness_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_muscle_stiffness_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_muscle_stiffness_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="joint_pain"
                onclick="toggleSymptomDetails(this, 'pastJointPainDetails')"
              />
              Joint Pain
            </label>
            <div id="pastJointPainDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_joint_pain_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Location:</label>
              <input
                type="text"
                name="past_joint_pain_location"
                placeholder="Enter location (Optional)"
              />
              <label>Intensity:</label>
              <select name="past_joint_pain_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="fatigue"
                onclick="toggleSymptomDetails(this, 'pastFatigueDetails')"
              />
              Fatigue
            </label>
            <div id="pastFatigueDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_fatigue_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Intensity:</label>
              <select name="past_fatigue_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="stress"
                onclick="toggleSymptomDetails(this, 'pastStressDetails')"
              />
              Stress
            </label>
            <div id="pastStressDetails" class="hidden">
              <label>Frequency:</label>
              <select name="past_stress_frequency">
                <option value="" selected>Select frequency (Optional)</option>
                <option value="daily">Daily</option>
                <option value="weekly">Weekly</option>
                <option value="rarely">Rarely</option>
              </select>
              <label>Intensity:</label>
              <select name="past_stress_intensity">
                <option value="" selected>Select intensity (Optional)</option>
                <option value="Very Little">1 - Very Little</option>
                <option value="Mild">2 - Mild</option>
                <option value="Moderate">3 - Moderate</option>
                <option value="Strong">4 - Strong</option>
                <option value="Extreme">5 - Extreme</option>
              </select>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_symptoms"
                value="other"
                onclick="toggleSymptomDetails(this, 'pastOtherSymptomsDetails')"
              />
              Other
            </label>
            <textarea
              id="pastOtherSymptomsDetails"
              name="past_other_notes"
              class="hidden other-notes"
              placeholder="Please specify other medical conditions"
              style="margin-top: 10px"
            ></textarea>
          </div>
        </div>

        <div class="section-divider"></div>

        <div class="form-field">
          <label for="past_injuries">Past Injuries:</label>

          <div class="checkbox-group">
            <label>
              <input
                type="checkbox"
                name="past_injuries"
                value="sprains"
                onclick="toggleSymptomDetails(this, 'sprainsDetails')"
              />
              Sprain(s)
            </label>
            <div id="sprainsDetails" class="hidden">
              <textarea
                id="sprainsNotes"
                name="sprains_notes"
                class="other-notes"
                placeholder="Please specify location and details about sprain(s)"
                style="margin-top: 10px"
              ></textarea>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_injuries"
                value="broken_bones"
                onclick="toggleSymptomDetails(this, 'brokenBonesDetails')"
              />
              Broken Bone(s)
            </label>
            <div id="brokenBonesDetails" class="hidden">
              <textarea
                id="brokenBonesNotes"
                name="broken_bones_notes"
                class="other-notes"
                placeholder="Please specify location and details about broken bone(s)"
                style="margin-top: 10px"
              ></textarea>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_injuries"
                value="concussions"
                onclick="toggleSymptomDetails(this, 'concussionsDetails')"
              />
              Concussion(s)
            </label>
            <div id="concussionsDetails" class="hidden">
              <textarea
                id="concussionsNotes"
                name="concussions_notes"
                class="other-notes"
                placeholder="Please specify details about concussion(s)"
                style="margin-top: 10px"
              ></textarea>
            </div>

            <label>
              <input
                type="checkbox"
                name="past_injuries"
                value="other"
                onclick="toggleSymptomDetails(this, 'otherInjuriesDetails')"
              />
              Other
            </label>
            <div id="otherInjuriesDetails" class="hidden">
              <textarea
                id="otherInjuriesNotes"
                name="other_injuries_notes"
                class="other-notes"
                placeholder="Please specify other injuries"
                style="margin-top: 10px"
              ></textarea>
            </div>
          </div>
        </div>

        <div class="section-divider"></div>

        <div class="form-field">
          <label for="past_surgeries">Past Surgeries:</label>
          <textarea
            id="past_surgeries"
            name="past_surgeries"
            placeholder="Please specify past surgeries"
            style="margin-top: 10px"
          ></textarea>
        </div>

        <div class="section-divider"></div>

        <div class="waiver">
          <h2>Client Waiver Form</h2>
          <p>Please take a moment to agree to the following terms:</p>
          <p>
            <input type="checkbox" name="waiver" /> If I experience pain or
            discomfort during the session, I will immediately inform my
            therapist so that pressure/strokes can be adjusted to my level of
            comfort. I will not hold my therapist responsible for any pain or
            discomfort I experience during or after the session.
          </p>
          <p>
            <input type="checkbox" name="waiver" /> I understand that the
            services offered today are not a substitute for medical care. I
            understand that my therapist is not qualified to perform spinal or
            skeletal adjustments, diagnose, prescribe, or treat physical or
            mental illness.
          </p>
          <p>
            <input type="checkbox" name="waiver" /> I affirm that I have
            notified my therapist of all known medical conditions and injuries.
          </p>
          <p>
            <input type="checkbox" name="waiver" /> I agree to inform the
            therapist of any changes in my health and medical condition. I
            understand that there shall be no liability on the therapistâ€™s part
            should I forget to do so.
          </p>
          <p>
            <input type="checkbox" name="waiver" /> I understand that massage is
            entirely therapeutic and non-sexual in nature.
          </p>
          <p>
            <input type="checkbox" name="waiver" /> By signing this release, I
            hereby waive and release my therapist from any and all liability,
            past, present, and future relating to massage therapy and bodywork.
          </p>
          <p>
            <input type="checkbox" name="waiver" />
            In the interest of accommodating and respecting all involved, 48hr
            notice is needed to <b>cancel</b> a scheduled appointment or
            <b>change</b> a scheduled appointment. If 48hr notice is not given,
            the cost of the treatment will be charged to the client. If another
            client is able to fill the appointment time, the cost of the
            treatment will be waived and will be replaced by a $10 office fee. A
            credit card will be provided and kept on file for collecting
            payment. If the client is not able to commit to a scheduled time,
            they can ask to be placed on a wait list and will be contacted if an
            appointment time becomes available.
          </p>

          <p>Typing your full name below will act as your signature:</p>
          <input
            type="text"
            id="signature"
            name="signature"
            class="signature-field"
            placeholder="Enter your full name"
            required
          />
        </div>

        <button type="submit" class="submit-btn">Submit</button>
      </form>
      <script>
        document
          .querySelector("form")
          .addEventListener("submit", async function (event) {
            event.preventDefault(); // Prevent default form submission
            const submitButton = event.target.querySelector(".submit-btn");
            submitButton.disabled = true; // Disable the submit button to prevent multiple submissions

            const waiverCheckboxes = document.querySelectorAll(
              'input[name="waiver"]'
            );
            let allChecked = true;

            waiverCheckboxes.forEach((checkbox) => {
              if (!checkbox.checked) {
                checkbox.style.outline = "2px solid red"; // Directly apply red outline
                allChecked = false;
              } else {
                checkbox.style.outline = ""; // Remove outline if checked
              }
            });

            if (!allChecked) {
              submitButton.disabled = false; // Re-enable the submit button if validation fails
              const firstUncheckedWaiver = document.querySelector(
                'input[name="waiver"]:not(:checked)'
              );
              if (firstUncheckedWaiver) {
                firstUncheckedWaiver.scrollIntoView({ behavior: "smooth" });
                firstUncheckedWaiver.focus();
                alert("please agree to all terms");
              }
              return;
            }

            await postClient(); // Run your existing function
            submitButton.disabled = false; // Optionally re-enable the button after form submission
          });
      </script>
    </div>
  </body>
</html>
